(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}new(function(){function n(e){var r,o=e.selector,i=e.pattern,a=void 0===i?{}:i,s=e.method;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.form=document.querySelector(o),this.pattern=a,this.method=s,this.elementsForm=(r=this.form.elements,function(e){if(Array.isArray(e))return t(e)}(r)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(t){return"button"!==t.tagName.toLowerCase()&&"button"!==t.type})),this.error=new Set}var r,o;return r=n,(o=[{key:"init",value:function(){var t=this;this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(e){return e.addEventListener("change",t.checkIt.bind(t))})),this.form.addEventListener("submit",(function(e){return t.elementsForm.forEach((function(e){t.checkIt({target:e})})),t.error.size&&e.preventDefault(),"error"}))}},{key:"sayError",value:function(){return this.error}},{key:"isValid",value:function(t){var e=this,n={notEmpty:function(t){return""!==t.value.trim()},pattern:function(t,e){return e.test(t.value)}};if(this.method){var r=this.method[t.id];if(r)return r.every((function(r){return n[r[0]](t,e.pattern[r[1]])}))}else console.warn("Необходимо передать id полей ввода и методы проверки этих полей!");return!0}},{key:"checkIt",value:function(t){var e=t.target;this.isValid(e)?(this.showSuccess(e),this.error.delete(e)):(this.showError(e),this.error.add(e))}},{key:"showError",value:function(t){if(t.classList.remove("success"),t.classList.add("error"),!t.nextElementSibling||!t.nextElementSibling.classList.contains("validator-error")){var e=document.createElement("div");e.textContent="Ошибка в этом поле",e.classList.add("validator-error"),t.insertAdjacentElement("afterend",e)}}},{key:"showSuccess",value:function(t){t.classList.remove("error"),t.classList.add("success"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error")&&t.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var t=document.createElement("style");t.textContent="\n            input.success{\n                border: 2px solid green;\n            }\n            input.error{\n                border: 2px solid red;\n                box-shadow: 0 0 10px 10px red;\n                \n            }\n            .validator-error{\n                font-size: 12px;\n                color: red;\n                font-family: sans-serif;\n                position: absolute;\n                bottom: -5px;\n                padding: 5px 10px;\n                background: #fff;\n                border-radius: 5px;\n                border: 2px solid black;\n                z-index: 100;\n                \n            }\n            .validator-error:after{\n                content: '';\n                position: absolute;\n                width: 10px;\n                height: 10px;\n                background: #fff;\n                top: -7px;\n                transform: rotate(-135deg);\n                left: 20px;\n                border-right: 2px solid black;\n                border-bottom: 2px solid black;\n            }\n        ",document.head.appendChild(t)}},{key:"setPattern",value:function(){this.pattern.phone||(this.pattern.phone=/^\+?[78]([-()]*\d){10}$/),this.pattern.email||(this.pattern.email=/\w+@\w+\.\w{2,3}/)}}])&&e(r.prototype,o),n}())({selector:"#form3",pattern:{name:/^[а-яА-Я\s]+$/,phone:/^\+?(\d{11})$/},method:{"form3-phone":[["notEmpty"],["pattern","phone"]],"form3-email":[["notEmpty"],["pattern","email"]],"form3-name":[["notEmpty"],["pattern","name"]],"form3-message":[["notEmpty"],["pattern","name"]]}}).init()})();